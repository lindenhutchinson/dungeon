<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Map Assistant</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark" style="height:8vh">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Navbar</a>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row justify-content-center align-items-center">
            <div id="control" class="overflow-auto" style="width:100vw; padding:2vw">
            </div>

        </div>
        <div class="row justify-content-center align-items-center">
            <div class="card" style="width: 75vw;">
                <div class="card-body">
                    <h5 id="r-name" class="card-title"></h5>
                    <hr>
                    <h6 class="card-subtitle mb-2 text-muted">Description</h6>
                    <p id="r-desc">lalalalala</p>
                    <hr>
                    <h6 class="card-subtitle mb-2 text-muted">Doors</h6>
                    <p id="r-desc"></p>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>
                </div>
            </div>
        </div>
    </div>


    <!-- 
        - should always show information about map details (floor,illumination,special,temperature,walls)
        - get information on a specific room (id) 1-n
        - get information on a specific corridor_feature (key) a-z
     -->
    <script type="text/javascript">
        fetch('data.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                createRoomButtons(data.rooms);
                showRoom('room-1', data.rooms);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });

        function onRoomClick(room_label) {
            const id = room_label.getAttribute('for');
            fetch("data.json")
                .then(response => response.json())
                .then(data => setTimeout(showRoom(id, data.rooms)));
        }
        function createRoomButtons(rooms) {
            const controlDiv = document.getElementById('control');
            const buttonDiv = document.createElement("div");
            buttonDiv.classList.add('btn-group');
            buttonDiv.setAttribute('role', 'group');
            buttonDiv.setAttribute('id', 'rooms');
            // <div class="btn-group" role="group" aria-label="Basic radio toggle button group" id="rooms">

            for (let i = 0; i < rooms.length; i++) {
                const room_id = `room-${rooms[i].id}`
                let input_ele = document.createElement('input');
                input_ele.classList.add('btn-check');
                input_ele.setAttribute('autocomplete', 'off');
                input_ele.setAttribute('id', room_id);
                input_ele.setAttribute('type', 'radio');
                input_ele.setAttribute('name', 'btnradio');
                input_ele.setAttribute('href', '');
                if (i == 0) {
                    input_ele.checked = true;
                }

                let label_ele = document.createElement('label');
                label_ele.classList.add('btn', 'btn-outline-primary');
                label_ele.setAttribute('for', room_id);
                label_ele.innerHTML = rooms[i].id;
                label_ele.setAttribute('onclick', 'onRoomClick(this)')

                buttonDiv.appendChild(input_ele);
                buttonDiv.appendChild(label_ele);
                controlDiv.appendChild(buttonDiv);
                // <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
                // <label class="btn btn-outline-primary" for="btnradio3">Radio 3</label>
            }
        }

        function showRoom(room_id, rooms) {
            console.log(room_id)
            const room = rooms.filter(r => `room-${r.id}` == room_id)[0];

            const display_ele = document.getElementById('display');
            const display_name = document.getElementById('r-name');
            display_name.innerHTML = `Room ${room.id}`;
            console.log(room);
        }
            /** r-name
             *  r-desc
             *  r-doors
             * 
             * 
             * /
             * */
            // console.log(room);
            // rooms.forEach((room) => {
            //     if(room) {
            //         const cur_room_id = `room-${room.id}`
            //         room_ele = document.getElementById(cur_room_id);
            //         room_ele.checked = false

            //         if(cur_room_id == room_id) {
            //             room_ele.checked = true;
            //             console.log(room);
            //         }
            // }
            // })
        
    </script>


</body>

</html>